<!-- Инстркуция в формате .md (Markdown) -->
# 3x-ui-cert-generator

## Скрипт для генерации самоподписанного SSL-сертификата

---

### **О скрипте и его работе**

Этот скрипт — это инструмент, который автоматизирует процесс создания **самоподписанного SSL-сертификата**, привязанного к IP-адресу вашего сервера. Он универсален и подходит для задач, где требуется защищённое соединение.

**Как это работает:**

1.  **Автоматическая подготовка:** Скрипт **автоматически проверяет и создает директорию** `~/certs` (в домашней папке пользователя) и переходит в неё. Сертификаты всегда будут сохраняться в предсказуемом месте.
2.  **Получение IP-адреса:** Скрипт определяет нужный IP (публичный или локальный, в зависимости от выбранного файла) и использует его как основное имя для сертификата.
3.  **Генерация ключей:** Создаётся **приватный ключ** (`secret.key`) для подписи сертификата.
4.  **Создание сертификата:** Создаётся **самоподписанный сертификат** (`cert.crt`), действующий 10 лет, который подтверждает подлинность вашего сервера.

---
### **Преимущества**

* **Простота и скорость**: Скрипт выполняет всю сложную работу за вас.
* **Бесплатно**: Идеальное решение для тестов, внутренних сетей или личных проектов.
* **Полная Автоматизация**: Скрипт сам находит IP и создает все необходимые файлы, включая директорию.
* **Универсальность**: Сертификат можно использовать для защиты любого сервиса с SSL/TLS.

---
### **Когда использовать и когда не использовать**

**Используйте этот скрипт, если:**
* Вам нужен бесплатный сертификат для **тестовой** или **внутренней среды**.
* Вы тестируете на **локальной машине** (VirtualBox, VMware) внутри вашей локальной сети.
* Вы подключаетесь напрямую по **IP-адресу**, а не через доменное имя.

**Не используйте этот скрипт, если:**
* Вам нужен **доверенный сертификат** для публичного сайта. Самоподписанные сертификаты вызывают предупреждения в браузерах.
* Вы планируете использовать **доменное имя**. В этом случае лучше получить сертификат от удостоверяющего центра, такого как **Let's Encrypt**.
* Вам нужен сертификат для коммерческого использования.

---
## Используем скрипт (Применяем нужный скрипт)

**Скрипт сам проверяет и создает папку `~/certs` в вашей домашней директории. Просто скопируйте и запустите нужную команду!**

**Для удалённого сервера (Публичный IP):**

```bash
wget -qO- https://raw.githubusercontent.com/Svodnet/3x-ui-cert-generator/refs/heads/main/generate-cert-autodir.sh | bash
````

**Для локальной (домашней) виртуалки или домашнего ПК (Локальный IP):**

```bash
wget -qO- https://raw.githubusercontent.com/Svodnet/3x-ui-cert-generator/refs/heads/main/generate-cert-local-autodir.sh | bash
```

-----

## P.S. Важные дополнения

### **Предупреждения от браузеров и антивирусов**

Браузеры и антивирусы не доверяют самоподписанным сертификатам, так как они не подписаны известным Удостоверяющим Центром (CA). Это приводит к **предупреждениям безопасности** ("Подключение не защищено"). Антивирусы также могут блокировать подключение; это решается добавлением сервера в **список исключений** антивируса.

-----

### **(I) Проблема с динамическим IP-адресом**

Если IP-адрес сервера меняется (например, после перезагрузки виртуалки), старый сертификат становится недействительным.

**Решения:**

  * **Ручной запуск:** Просто запускайте скрипт заново после смены IP.
  * **Автозапуск при старте:** Добавьте команду запуска скрипта в автозагрузку системы, используя `crontab -e` с опцией `@reboot`.

**Важно:** Для публичных проектов рекомендуется использовать статический IP или доменное имя (с **Dynamic DNS**).

-----

### **(II) Решение проблемы с динамическим IP-адресом (Фиксация)**

Самый надёжный способ — сделать IP-адрес вашей машины статическим в локальной сети:

1.  **Фиксация IP-адреса через MAC-адрес (рекомендуется):** Настройте ваш домашний роутер в разделе **DHCP-сервера** или **IP Reservation**, чтобы он всегда выдавал вашей машине один и тот же IP-адрес, используя её уникальный **MAC-адрес**.
2.  **Настройка статического IP-адреса на самой машине:** Вручную настройте сетевые параметры в операционной системе виртуалки.

Использование этих методов избавит вас от необходимости постоянно перезапускать скрипт.

-----
